{"remainingRequest":"D:\\Program Files\\SB\\web\\admin-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Program Files\\SB\\web\\admin-web\\src\\views\\common\\Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Program Files\\SB\\web\\admin-web\\src\\views\\common\\Login.vue","mtime":1555658683015},{"path":"D:\\Program Files\\SB\\web\\admin-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Program Files\\SB\\web\\admin-web\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\Program Files\\SB\\web\\admin-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Program Files\\SB\\web\\admin-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n  data() {\n    return {\n      captcha_url: '../../assets/code.jpg',\n      pwdType: 'password',\n      loading: false,\n      status: {\n        index: 0,\n        time: 20,\n        timeClick: false,\n        resetPassword: false,\n        activeName: 'first'\n      },\n      loginForm: {\n        username: '13000000001',\n        password: '123456',\n        checkcode: ''\n      },\n      //提示消息\n      loginRules: {\n        username: [\n          { required: true, message: \"请输入手机号\" }\n        ],\n        password: [\n          { required: true, message: \"请输入密码\" }\n        ],\n        checkcode: [\n          { required: true, message: \"请输入验证码\" }\n        ]\n      }\n    };\n  },\n  created() {\n    if (!this.$store.state.auth_info.peerid) {\n      this.$api.common.peerid().then((data) => {\n        this.$store.commit(\"auth_info\", {\n          peerid: data\n        });\n        localStorage.setItem(\"peerid\", data, 30);\n        this.captcha();\n      });\n    } else {\n      this.captcha();\n    }\n    this.getDataCookie();\n  },\n  methods: {\n    setInfo(sessionid, username) {\n      this.$store.commit(\"auth_info\", {\n        sessionid: sessionid\n      });\n      this.$store.commit(\"auth_info\", {\n        username: username\n      });\n      localStorage.setItem(\"sessionid\", sessionid, 30);\n      localStorage.setItem(\"username\", username, 30);\n    },\n    login(formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          this.loading = true;\n          this.$api.common.login(\n            this.loginForm.username,\n            this.loginForm.password,\n            this.loginForm.checkcode\n          ).then(res => {\n            this.loading = false;\n            this.saveDataCookie(this.loginForm.username);\n            this.setInfo(res.sessionid, res.username);\n            this.$router.push({\n              path:'index'\n            });\n          }).catch((err) => {\n            this.loading = false;\n            this.captcha();\n            this.$error(err.msg);\n          })\n        } else {\n          return false;\n        }\n      });\n    },\n\n    // 将手机号保存至cookie，当断开退出时自动填写\n    saveDataCookie(username) {\n      let date = new Date();\n      date.setDate(date.getDate() + 7);\n      document.cookie = \"username=\" + username + \";expires=\" + date.toString();\n    },\n    getDataCookie() {\n      if (document.cookie.match(/username=.*/)) {\n        let username = document.cookie.match(/username=.*/)[0].slice(9)\n        this.loginForm.username = username.slice(0, 11)\n      }\n    },\n    showPassword() {\n      this.pwdType = 'text';\n    },\n    captcha() {\n      let peerid = this.$store.state.auth_info.peerid;\n      this.$api.common.captcha(peerid).then(data => {\n        this.captcha_url = data.base64;\n      }).catch((err) => {\n      });\n    },\n  }\n}\n",{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/views/common","sourcesContent":["<template>\r\n  <div class=\"warp\">\r\n    <div class=\"login-container\">\r\n      <img src=\"../../assets/login-left.png\" alt=\"\" class=\"img-bg\">\r\n      <el-form class=\"login-form\" :model=\"loginForm\" autoComplete=\"on\" status-icon :rules=\"loginRules\" ref=\"loginForm\"\r\n        label-position=\"left\">\r\n        <p class=\"title\">后台管理系统</p>\r\n\r\n        <el-tabs v-model=\"status.activeName\" stretch>\r\n          <el-tab-pane label=\"账户密码\" name=\"first\" class=\"tab\">\r\n\r\n            <el-form-item prop=\"username\">\r\n              <!-- <span class=\"svg-container svg-container_login\">\r\n                  <svg-icon icon-class=\"phone\" />\r\n                </span> -->\r\n              <el-input name=\"username\" type=\"text\" v-model=\"loginForm.username\" :maxlength='15' autoComplete=\"on\"\r\n                placeholder=\"请输入手机号\" />\r\n            </el-form-item>\r\n            <el-form-item prop=\"password\">\r\n              <!-- <span class=\"svg-container\">\r\n                  <svg-icon icon-class=\"password\"></svg-icon>\r\n                </span> -->\r\n              <el-input name=\"password\" :type=\"pwdType\" :maxlength=\"20\" v-model=\"loginForm.password\"\r\n                placeholder=\"请输入密码\"></el-input>\r\n              <!-- <span class=\"show-pwd\" @click=\"showPassword\">\r\n                  <svg-icon icon-class=\"eye\"></svg-icon>\r\n                </span> -->\r\n            </el-form-item>\r\n\r\n            <el-form-item prop=\"checkcode\">\r\n\r\n              <!-- <span class=\"svg-container\">\r\n                  <svg-icon icon-class=\"code\"></svg-icon>\r\n                </span> -->\r\n              <el-input type=\"text\" class=\"lastInput\" style=\"widows: 225px;\" placeholder=\"请输入验证码\"\r\n                @keyup.enter.native=\"login('loginForm')\" :maxlength=\"4\" v-model=\"loginForm.checkcode\">\r\n              </el-input>\r\n              <div class=\"captcha_dialog\">\r\n                <img :src=\"captcha_url\" alt=\"\" @click=\"captcha()\" class=\"captcha-img\">\r\n              </div>\r\n            </el-form-item>\r\n            <el-button type=\"primary\" :loading=\"loading\" @click.native.prevent=\"login('loginForm')\"\r\n              class=\"login-button\">\r\n              登录\r\n            </el-button>\r\n            <p class=\"resetPassword\" @click=\"status.resetPassword = true\">忘记密码?</p>\r\n          </el-tab-pane>\r\n        </el-tabs>\r\n      </el-form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    data() {\r\n      return {\r\n        captcha_url: '../../assets/code.jpg',\r\n        pwdType: 'password',\r\n        loading: false,\r\n        status: {\r\n          index: 0,\r\n          time: 20,\r\n          timeClick: false,\r\n          resetPassword: false,\r\n          activeName: 'first'\r\n        },\r\n        loginForm: {\r\n          username: '13000000001',\r\n          password: '123456',\r\n          checkcode: ''\r\n        },\r\n        //提示消息\r\n        loginRules: {\r\n          username: [\r\n            { required: true, message: \"请输入手机号\" }\r\n          ],\r\n          password: [\r\n            { required: true, message: \"请输入密码\" }\r\n          ],\r\n          checkcode: [\r\n            { required: true, message: \"请输入验证码\" }\r\n          ]\r\n        }\r\n      };\r\n    },\r\n    created() {\r\n      if (!this.$store.state.auth_info.peerid) {\r\n        this.$api.common.peerid().then((data) => {\r\n          this.$store.commit(\"auth_info\", {\r\n            peerid: data\r\n          });\r\n          localStorage.setItem(\"peerid\", data, 30);\r\n          this.captcha();\r\n        });\r\n      } else {\r\n        this.captcha();\r\n      }\r\n      this.getDataCookie();\r\n    },\r\n    methods: {\r\n      setInfo(sessionid, username) {\r\n        this.$store.commit(\"auth_info\", {\r\n          sessionid: sessionid\r\n        });\r\n        this.$store.commit(\"auth_info\", {\r\n          username: username\r\n        });\r\n        localStorage.setItem(\"sessionid\", sessionid, 30);\r\n        localStorage.setItem(\"username\", username, 30);\r\n      },\r\n      login(formName) {\r\n        this.$refs[formName].validate((valid) => {\r\n          if (valid) {\r\n            this.loading = true;\r\n            this.$api.common.login(\r\n              this.loginForm.username,\r\n              this.loginForm.password,\r\n              this.loginForm.checkcode\r\n            ).then(res => {\r\n              this.loading = false;\r\n              this.saveDataCookie(this.loginForm.username);\r\n              this.setInfo(res.sessionid, res.username);\r\n              this.$router.push({\r\n                path:'index'\r\n              });\r\n            }).catch((err) => {\r\n              this.loading = false;\r\n              this.captcha();\r\n              this.$error(err.msg);\r\n            })\r\n          } else {\r\n            return false;\r\n          }\r\n        });\r\n      },\r\n\r\n      // 将手机号保存至cookie，当断开退出时自动填写\r\n      saveDataCookie(username) {\r\n        let date = new Date();\r\n        date.setDate(date.getDate() + 7);\r\n        document.cookie = \"username=\" + username + \";expires=\" + date.toString();\r\n      },\r\n      getDataCookie() {\r\n        if (document.cookie.match(/username=.*/)) {\r\n          let username = document.cookie.match(/username=.*/)[0].slice(9)\r\n          this.loginForm.username = username.slice(0, 11)\r\n        }\r\n      },\r\n      showPassword() {\r\n        this.pwdType = 'text';\r\n      },\r\n      captcha() {\r\n        let peerid = this.$store.state.auth_info.peerid;\r\n        this.$api.common.captcha(peerid).then(data => {\r\n          this.captcha_url = data.base64;\r\n        }).catch((err) => {\r\n        });\r\n      },\r\n    }\r\n  }\r\n</script>\r\n<style scopen>\r\n  .warp {\r\n    width: 100vw;\r\n    height: 100vh;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    overflow: hidden;\r\n    background: url('../../assets/login-bg.png') no-repeat center center;\r\n    background-size: cover;\r\n  }\r\n\r\n  .login-container {\r\n    height: 600px;\r\n    width: 750px;\r\n    z-index: 1;\r\n    overflow: hidden;\r\n  }\r\n\r\n  .img-bg {\r\n    width: 45%;\r\n    height: 100%;\r\n    float: left;\r\n  }\r\n\r\n  .login-form {\r\n    width: 55%;\r\n    height: 100%;\r\n    float: right;\r\n    background-color: #ffffff;\r\n    box-sizing: border-box;\r\n    overflow-y: hidden;\r\n    /* 滚动条样式 */\r\n  }\r\n\r\n  .login-form::-webkit-scrollbar {\r\n    background-color: rgba(0, 0, 0, 0);\r\n  }\r\n\r\n  .title {\r\n    font-size: 26px;\r\n    color: #333333;\r\n    margin: 40px auto 20px;\r\n    text-align: center;\r\n  }\r\n\r\n  .tab {\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n    align-items: center;\r\n    margin-top: 20px;\r\n  }\r\n\r\n  .show-pwd {\r\n    position: absolute;\r\n    right: 10px;\r\n    top: 7xp;\r\n    font-size: 16px;\r\n    color: #889aa4;\r\n    cursor: pointer;\r\n    user-select: none;\r\n  }\r\n\r\n  .login-button {\r\n    width: 260px;\r\n    height: 50px;\r\n    margin: 25px 0 0 0;\r\n    background-color: #3182af;\r\n    border-color: #3182af;\r\n    font-size: 20px;\r\n  }\r\n\r\n  .resetPassword {\r\n    font-size: 14px;\r\n    cursor: pointer;\r\n  }\r\n\r\n  .resetPassword:hover {\r\n    color: #3182AF;\r\n  }\r\n\r\n  .chatcha {\r\n    height: 40px;\r\n    margin-top: 6px;\r\n    display: inline-block;\r\n    border-left: 1px solid #e5e5e5;\r\n  }\r\n\r\n  /* .......改变 el 默认........ */\r\n  .el-input__inner {\r\n    background-color: transparent;\r\n  }\r\n\r\n  .el-tabs {\r\n    width: 85%;\r\n    height: 100%;\r\n    margin: 0 auto;\r\n  }\r\n\r\n  .el-tab-pane {\r\n    height: 100%;\r\n    box-sizing: border-box;\r\n  }\r\n\r\n  .el-form-item {\r\n    width: 100%;\r\n    height: 55px;\r\n    padding: 2%;\r\n    border: none;\r\n  }\r\n\r\n  .el-form-item .el-form-item__content {\r\n    height: 100%;\r\n    border: 1px solid #DCDFE6;\r\n  }\r\n\r\n  .el-form-item__content .el-input {\r\n    width: 100%;\r\n    height: 100%;\r\n  }\r\n\r\n  .el-form-item__content .lastInput {\r\n    width: 80%;\r\n  }\r\n\r\n  .el-input .el-input__inner {\r\n    height: 100%;\r\n    border: none;\r\n  }\r\n\r\n  .captcha_dialog {\r\n    float: right;\r\n    height: 99%;\r\n    width: 19%;\r\n    border-left: 1px solid #DCDFE6;\r\n  }\r\n\r\n  .captcha-img {\r\n    width: 80%;\r\n    height: 85%;\r\n    margin: 5px;\r\n  }\r\n</style>"]}]}